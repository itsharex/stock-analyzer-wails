## 核心功能版图
- 实时行情与数据源增强：稳健 SSE、指数/ETF/行业板块覆盖、数据质量监控
- 持仓与资产管理：多账户、交易记录、盈亏分析、绩效指标（年化收益、最大回撤、Sharpe）
- 风险控制：仓位约束、止盈止损、行业/单票暴露、波动率与VaR、回撤预警
- 预警与自动化：价格/涨跌幅/量能/形态/公告模板化预警，冷却时间与去重，通知渠道（系统通知/邮件/企业微信）
- 策略与回测：指标库（MA/MACD/RSI/KDJ/布林带）、事件驱动回测、滑点与手续费模型、参数优化与绩效报告
- AI分析与对话：自然语言检索与筛选、新闻/公告情绪分析、研报摘要、解释型多维分析报告
- 研究数据接入：新闻RSS、巨潮公告、财务与行业数据融合
- 可视化增强：多图层K线/分时、AI绘图标注、信号叠加、交互筛选
- 性能与可靠性：缓存与离线同步、日志分级与采样、并发与资源治理、健康检查
- 安全与合规：数据隐私与免责声明、频控与熔断、敏感操作权限
- 可扩展性：策略插件化、脚本化、对外REST/gRPC接口

## 技术实施要点与现有代码对齐
- 后端服务：
  - SSE稳健化与状态管理：[stock_service.go](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/services/stock_service.go)
  - 前端绑定入口与方法暴露：[app.go](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/app.go)
  - 数据持久化与统计（SQLite）：DBService 相关文件（已存在，扩展持仓与交易模型）
- 前端：
  - API封装与事件订阅：[useWailsAPI.ts](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/frontend/src/hooks/useWailsAPI.ts)
  - 自选与详情的SSE订阅与清理：[Watchlist.tsx](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/frontend/src/components/Watchlist.tsx)、[WatchlistDetail.tsx](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/frontend/src/components/WatchlistDetail.tsx)
  - 图表组件与信号叠加：K线/分时组件文件（现有基础，计划扩展AI标注层）

## 分阶段落地计划
### 阶段1：实时行情与稳定性增强
- 为每只股票维护连接状态与失败计数（前后端）
- 完善重连与节流策略（已部分实现），加入健康检查事件
- 前端在列表与详情统一清理并停止SSE，避免重复连接
- 交付：稳定的实时价与涨跌幅刷新、显著减少批量告警

### 阶段2：预警与通知
- 预警规则模板：价格、涨跌幅、量能、形态、公告关键词
- 去重与冷却时间、交易时段策略
- 通知适配：系统通知/邮件/企业微信
- 交付：可配置的预警中心与触发历史

### 阶段3：持仓与风险
- 扩展持仓表结构（多账户、成本、税费、现金）与交易记录
- 计算绩效指标与风险度量（最大回撤、波动率、VaR）
- 风控规则引擎：仓位上限、止损/止盈、行业暴露
- 交付：持仓仪表盘与风险预警面板

### 阶段4：策略与回测
- 指标库与信号生成器（MA/MACD/RSI/KDJ/布林带）
- 事件驱动回测引擎，含滑点与手续费模型，支持复权与分红
- 参数网格搜索与绩效报告（收益、回撤、卡玛、Sharpe）
- 交付：策略管理与回测报告视图

### 阶段5：AI分析与对话
- NLP查询到筛选与排序：将自然语言转为筛选条件
- 新闻/公告情绪分析与研报摘要，生成多维解释型报告
- 对话助手联动操作（添加自选、设置预警、打开图表）
- 交付：AI助手面板与解释报告生成

### 阶段6：数据接入与可视化增强
- 新闻RSS与公告接口接入，合并至个股信息流
- 图表AI标注层：关键位、趋势线、形态识别可视化
- 交付：研究信息整合与图形化洞见

## 数据与性能治理
- 缓存：热点行情内存缓存 + SQLite落地，避免重复拉取
- 日志：zap分级与采样、错误节流、诊断事件
- 并发：按code限流与连接复用、统一Stop清理
- 可观测：指标采集（连接数、失败率、重试次数）与健康页

## 安全与合规
- 明示免责声明与风险提示
- 请求频控与熔断、接口时段控制
- 权限边界与敏感操作确认

## 期望交互与体验
- 自然语言操作：筛选、对比、解释、设置预警
- 列表/详情一致的实时刷新与清理
- 清晰的状态与健康提示（连接中/已重连/失败计数）

## 请求确认
- 请确认优先顺序（例如：先做“阶段2预警”，再做“阶段3持仓与风险”），以及你希望增加或删减的模块；确认后我将按此计划开始实施。