## 目标
- 自选行情列表的每个股票项以 SSE 实时更新“当前价/涨跌幅”，页面打开即为最新，停留期间随市场变化无延迟刷新。

## 方案概览（纯 SSE）
- 后端沿用现有单码 SSE：StreamIntradayData(code) 推送事件 intradayDataUpdate:{code}（见 services/stock_service.go 与 [app.go:StreamIntradayData](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/app.go#L677-L684)）。
- 前端在自选列表页为每只自选股票启动 SSE，并订阅对应事件，解析最新分时点更新列表项的 price/changeRate。
- 卸载时显式停止各 SSE（新增绑定 StopIntradayStream），避免连接与 goroutine 泄漏。

## 具体实现
### 后端（Go / Wails）
- 新增绑定方法：App.StopIntradayStream(code string)
  - 直接调用 services/stock_service.go 的 StopIntradayStream(code)（已有实现 [stock_service.go:StopIntradayStream](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/services/stock_service.go#L465-L476)）。
  - 目的：列表页离开/重载时及时释放 SSE 连接。
- 保持现有事件名与载荷：intradayDataUpdate:{code}，载荷为 trends[] 字符串数组（最新点形如 "HH:MM,买一,最新价,...,成交量,均价"，参考 [WatchlistDetail.tsx 解析逻辑](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/frontend/src/components/WatchlistDetail.tsx#L139-L155)）。

### 前端（React/TS）
- Watchlist.tsx（[文件链接](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/frontend/src/components/Watchlist.tsx)）：
  - 加载自选后（getWatchlist），为每个 stock.code：
    1) 调用 streamIntradayData(code) 启动 SSE。
    2) 订阅 EventsOn(`intradayDataUpdate:${code}`, handler)。
    3) 在 handler 中解析最新趋势点：取价格 parts[2] 为最新价，结合每个项的 preClose 计算涨跌额/涨跌幅：
       - change = price - preClose
       - changeRate = (price - preClose) / preClose * 100
    4) 更新本地状态 setStocks，替换对应项的 price/change/changeRate。
  - 组件卸载或列表刷新时：
    1) 对所有 code 执行 EventsOff(`intradayDataUpdate:${code}`)。
    2) 调用 StopIntradayStream(code) 显式关闭后端流。
- 初始显示策略（无轮询）：
  - 默认直接以 SSE 的首次推送作为当前价来源；如需“页面一打开就有数”，允许一次性单码快照 GetIntradayData(code) 作首帧，不进行任何后续轮询（可选，若你坚持纯 SSE，也可移除此首帧）。

## 并发与资源控制
- services 层已按 code 维度去重：重复启动同一 code 会先 Stop 旧流（见 [stock_service.go](file:///c:/Users/o_wanyuqin/GolandProjects/stock-analyzer-wails/services/stock_service.go#L491-L499)）。
- 列表页启动的流数量等于自选个数；如自选规模较大，可考虑：
  - 分批启动（每 50ms 启动一条），避免瞬时并发峰值；
  - 可视区域优先（只对视口内的代码启动 SSE；滚动进入再启动），如需进一步优化再加上。

## 验证
- 打开“自选行情”页面：所有股票项显示当前价/涨跌幅，随 SSE 更新变化；
- 切换到详情页：同一 code 的 SSE 事件可被两处消费（列表与详情），效果一致；
- 离开“自选行情”页面：所有 SSE 停止，无 goroutine 与连接残留（通过日志与活动计数核验）。

## 影响范围与兼容
- 仅改动列表页数据来源方式与新增一个停止绑定；不影响持仓、预警等功能。
- 回滚：移除 Stop 绑定并在列表页取消订阅即可恢复旧逻辑。

请确认该 SSE 方案；确认后我将按上述步骤实现前后端改动，并提交供你审阅。